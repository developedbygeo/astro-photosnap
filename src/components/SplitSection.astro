---
import type { ImageMetadata } from "astro";
import { Image, type LocalImageProps } from "astro:assets";
import { cn } from "@/lib/utils";

export interface Props {
  title: string;
  description: string;
  layout: "image-left" | "image-right";
  link: {
    href: string;
    title: string;
  };
  image: {
    src: ImageMetadata;
    alt: LocalImageProps["alt"];
    width?: LocalImageProps["width"];
    height?: LocalImageProps["height"];
    loading?: LocalImageProps["loading"];
  };
  colors: {
    sectionBackground: "black" | "white";
    textColor?: "black" | "white";
  };
}

const {
  title,
  description,
  colors,
  link,
  layout = "image-right",
  image,
} = Astro.props;

const sectionBackground =
  colors.sectionBackground === "white"
    ? "bg-white text-black-950"
    : "bg-black-950 text-white";

const descriptionTextColor =
  colors.sectionBackground === "black" ? "text-white/60" : "text-black/60";

const imageStyle = `background-image: url(${image.src}); background-size: cover; background-position: center;`;
---

<section
  class={cn(
    "grid grid-rows-[0.75fr,1fr] md:grid-rows-1 md:grid-cols-[1fr,0.5fr] lg:grid-cols-[minmax(500px,750px)_1fr] max-h-[75dvh] overflow-hidden",
    sectionBackground,
  )}
>
  <!-- Text Section -->
  <div
    class="order-2 md:order-1 max-w-4xl flex items-center md:py-44 md:px-28 h-full"
  >
    <div class="flex flex-col gap-5 lg:max-w-[75%]">
      <h2 class="uppercase text-4xl tracking-wide">{title}</h2>
      <p class={cn("text-xs", descriptionTextColor)}>
        {description}
      </p>
      <a href={link.href} class="text-blue-500 underline">{link.title}</a>
    </div>
  </div>

  <!-- Image Section -->
  <div
    class="order-1 md:order-2 w-full h-auto md:h-full lg:max-h-[75dvh] bg-cover bg-center"
    style={{ backgroundImage: `url(${image.src.src})` }}
    role="img"
    aria-label={image.alt}
  >
  </div>
</section>
